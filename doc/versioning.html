
<!DOCTYPE html>
<html lang="en">
	<head>
		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="description" content="A 3D game engine written in Go!">
		<meta name="author" content="The Azul3D Authors">
		
			<title>Versioning - Azul3D</title>
		
		<link rel="shortcut icon" href="/content/favicon.png"> 

		
		<link rel="stylesheet" type="text/css" href="/content/reset.css">

		
		<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Cutive+Mono' rel='stylesheet' type='text/css'>

		
		<link href='/content/dejavusans_book/stylesheet.css' rel='stylesheet' type='text/css'>

		
		<link href='/content/brandico/brandico.css' rel='stylesheet' type='text/css'>

		
		

		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

		
		<link rel="stylesheet" type="text/css" href="/content/stylesheet.css">
		<link rel="stylesheet" type="text/css" href="/content/mq.css">
	</head>
	<body>


<div id="top"></div>






































<div id="toparea">
	<div id="logo">
		<a href="/"><span class="biohazard">☣</span>
		<span>Azul3D</span></a>
	</div>

	<div id="shortbar">
		<a href="https://github.com/azul3d" target="_blank"><i class="icon-github menuIcon"></i><div class="title">GitHub</div></a>
		<a href="https://twitter.com/hashtag/azul3d" target="_blank"><i class="icon-twitter-bird menuIcon"></i><div class="title">Twitter</div></a>
		<a href="https://www.facebook.com/pages/Azul3D/651643168254798" target="_blank"><i class="icon-facebook menuIcon"></i><div class="title">Facebook</div></a>
		<a href="https://groups.google.com/forum/#!forum/azul3d" target="_blank" class="mail"><i class="menuIcon mailIcon">✉</i><div class="title">Mailing List</div></a>
	</div>
</div>

<div id="navigation">
	<h1>Navigation</h1>
	<span class="list">
		<span class="item"><span class="biohazard">☣</span>&nbsp;&nbsp;<span class="content"><a href="/">Home</a></span></span>
		<span class="item"><span class="biohazard">☣</span>&nbsp;&nbsp;<span class="content"><a href="/news">News</a></span></span>
		<span class="item"><span class="biohazard">☣</span>&nbsp;&nbsp;<span class="content"><a href="/packages.html">Packages</a></span></span>
		<span class="item"><span class="biohazard">☣</span>&nbsp;&nbsp;<span class="content"><a href="/doc/faq.html">FAQ</a></span></span>
	</span>
</div>


<div id="content-container">
	<div id="content" class="slim article">
<h1>Versioning</h1>

<p>Azul3D packages are versioned such that when API compatible changes are made, programs using the previous package API are not broken. This document describes the versioning scheme used by Azul3D for all package imports.</p>

<ul>
<li><a href="#the-basics">The Basics</a></li>
<li><a href="#development-versions">Development Versions</a></li>
<li><a href="#implementation-git-tags">Implementation - Git Tags</a></li>
<li><a href="#implementation-google-app-engine">Implementation - Google App Engine</a></li>
</ul>

<h1>The Basics</h1>

<p>In the most basic form a package import path has the following syntax:</p></p>

<pre><code>azul3d.org/somepkg.v(major)[.(minor)]
</code></pre>

<p>For instance the import path for <em>somepkg</em> whose major version is one would be:</p>

<pre><code>azul3d.org/somepkg.v1
</code></pre>

<p>Or the import path for <em>somepkg</em> whose major version is one and minor version is two:</p>

<pre><code>azul3d.org/somepkg.v1.2
</code></pre>

<p>Even though the import path ends with a version number, the package is still referenced in code the same exact way:</p>

<pre><code>somepkg.DoSomething()
</code></pre>

<p>This is because Go analyzes the package name from the source code files &ndash; not the import URL.</p>

<h1>Development Versions</h1>

<p>There is a special path extension, <em>.dev</em>, which signifies the in-development version of the package, like so:</p>

<pre><code>azul3d.org/somepkg.dev
</code></pre>

<p>This special extension should only be used if you need features only found in the in-development versions of packages, but most of the time you should never use it and instead stick with the most-recently released version (mentioned on the documentation page for that package).</p>

<h1>Implementation - Git Tags</h1>

<p>In our implementation of versioning, we use git tags like &ldquo;v1&rdquo; or &ldquo;v1.2&rdquo; to reference a specifically released version. This is important for a few reasons:</p>

<ul>
<li>Tags can be moved to newer revisions, so that fixes can still be made to versions post-release (as long as no backwards-incompatible changes have been made yet).</li>
<li>Tags are easy to view through the GitHub API which makes writing versioned-documentation easy.</li>
<li>Version tags can be viewed through the GitHub&rsquo;s website (which even allows downloading zipped archives of version releases).</li>
</ul>

<h1>Implementation - Google App Engine</h1>

<p>The Go tool is not aware of tags as version numbers, this means that we must theoretically host a different repository for each version of each package. But in reality we can actually work around this by using some trickery:</p>

<p>Using remote import path HTML meta tags (see <a href="http://golang.org/cmd/go/#hdr-Remote_import_paths">here</a>) the Go tool will let us alias an GitHub repository under a different domain name, such that the import path:</p>

<pre><code>github.com/azul3d/somepkg
</code></pre>

<p>Becomes:</p>

<pre><code>azul3d.org/somepkg
</code></pre>

<p>Then we make use of an appengine application responsible for acting as a proxy of sorts (view the source of this application <a href="https://github.com/azul3d/appengine">here</a>). For standard web requests, it simply makes a proxied request to our <code>azul3d.github.io</code> domain, where the entire website content generated via the <a href="https://github.com/azul3d/cmd-webgen">webgen tool</a> is hosted. In practice this is not slow because the website is fronted by <a href="https://www.cloudflare.com/">CloudFlare</a> which caches these requests.</p>

<p>When the appengine application receives a request from the go-get tool (signified by a URL query term <code>?go-get=1</code>), it first makes contact to GitHub to see if the repository exists, if it does then it serves a meta tag to go-get like:</p>

<pre><code>&lt;meta name=&quot;go-import&quot; content=&quot;azul3d.org/somepkg.v1 git azul3d.org/somepkg.v1/repo&quot;&gt;
</code></pre>

<p>Then go get wil run the git clone command like:</p>

<pre><code>git clone azul3d.org/somepkg.v1/repo $GOPATH/src/azul3d.org/somepkg.v1
</code></pre>

<p>And since we claimed in the meta tag that <code>azul3d.org/somepkg.v1/repo</code> was our git repository, git clone issues a few HTTP requests to clone the repository hosted there. We intercept those requests and forward them over to GitHub, while also pointing them towards the correct version tag specified in the URL.</p>

<script>
$(function() {
	var idName = function(text) {
		
		text = text.toLowerCase()

		
		text = text.replace(/[^a-z0-9- ]/g, "");

		
		text = text.replace(/[ ]/g, "-");

		
		return text.replace(/-+/g, "-");
	}

	
	$(".article h1").each(function(i, obj) {
		if(i == 0) {
			return;
		}
		var id = idName(obj.innerHTML);
		var link = $("<a />", {
			id: id,
			title: "permalink",
			href: "#" + id,
			text: "»",
		});
		$(this).prepend(" ");
		link.prependTo($(this));
	});

	
	$(".article h1").each(function(i, obj) {
		if(i == 0) {
			return;
		}
		var id = idName(obj.innerHTML);

		var span = $("<span />", {
			class: "toplink",
			text: "(",
		});

		var link = $("<a />", {
			title: "permalink",
			href: "#top",
			text: "top",
		});
		link.appendTo(span);
		span.append(")");
		$(this).append(" ");
		span.appendTo($(this));
	});

	$("ul li").each(function(i, obj) {
		var bio = $("<span />", {
			class: "biohazard",
			text: "☣",
		});
		var content = $("<span />", {
			class: "content",
		});
		$(this).wrap('<span></span>');
		bio.prependTo($(this).parent());
	});
});
</script>
	</div>
</div>


<div id="footer">
	<div>© 2014 The Azul3D Authors, All Rights Reserved.</div>
	<div>Unless noted otherwise, the content of this page is licensed under the Creative Commons Attribution 3.0 License, and code is licensed under a BSD license.</div>
</div>


<script>
$(document).ready(function() {
	$("body").css("opacity", 0);

	 
	var ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";
	var redirect = window.location.hostname != 'azul3d.org';
	if(location.hostname == "localhost" || location.hostname.search(ValidIpAddressRegex) != -1) {
		
		
		redirect = false;
	}
	if(redirect){
	    window.top.location.href = 'http://azul3d.org'; 
	}
});

$(window).ready(function() {
	var fadeIn = function(self, delay) {
		self.css("opacity", 0).delay(delay).animate({opacity: 1}, "slow");
	}

	var fromSameSite = document.referrer.indexOf(location.protocol + "//" + location.host) === 0;


	
	
	var longPage = $(document).height() > $(window).height() * 3;
	if(fromSameSite || longPage) {
		fadeIn($("body"), 10);
	} else {
		var workingIndex = 0;
		var speed = 75;
		$("#content").children().each(function(index) {
			fadeIn($(this), 1000 + (speed * workingIndex));
			workingIndex++;
			if($(this).hasClass("list")) {
				$(this).children().each(function(index) {
					fadeIn($(this), 1000 + (speed * workingIndex));
					workingIndex++;
				});
			}
		});

		var w = $("#shortbar").width();
		$("#shortbar").css({
			right: -w-1 + "px",
			opacity: 0
		}).delay(10).animate({
			right: "0px",
			opacity: 1
			}, "slow");

		var w = $("#navigation").width();
		$("#navigation").css({
			left: -w-1 + "px",
			opacity: 0
		}).delay(10).animate({
			left: "0px",
			opacity: 1
			}, "slow");

		fadeIn($("#logo"), 10);
		fadeIn($("body"), 10);
	}
})
</script>
	</body>
</html>



